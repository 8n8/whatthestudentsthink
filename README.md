# What The Students Think

A static website for displaying the results of the National Student Survey.

# Program structure

The data used for the website is held in two CSV files, obtained by opening the spreadsheet from the Office for Students and saving the 'nss' and 'nss3' worksheets as separate CSV files. One contains the overall scores for each university and the other contains the by-subject breakdown for each university.

The front end is written in Elm, and contains all the data.  There is also a Haskell program that processes the raw data and generates the Elm data files.

# Building

Software versions that the build is tested with:

+ [Elm](https://guide.elm-lang.org/install.html) 0.19.1
+ [Uglify-js](https://github.com/mishoo/UglifyJS2)) 3.10.1
+ [Haskell Tool Stack](https://docs.haskellstack.org/en/stable/install_and_upgrade/) 2.3.3

The build has been tested in Ubuntu Linux, version 20.04.

Run the following commands:

```
git clone git@github.com:8n8/whatthestudentsthink.git
cd whatthestudentsthink

# 'haskell' directory contains all the Haskell code.
cd haskell

# Compile the Haskell code.
stack build

# Run the Haskell binary. It generates a file called 'Data.elm' in elm/src, which contains the processed data.
stack exec generateCodes

# The 'elm' directory contains all the Elm code for the frontend.
cd ../elm

# Compile the Elm code.
elm make src/Main.elm --output --optimize main.js

# Compress the Javascript file generated by Elm and put the result in the 'static' directory.
uglifyjs main.js --compress "pure_funcs=[F2,F3,F4,F5,F6,F7,F8,F9,A2,A3,A4,A5,A6,A7,A8,A9],pure_getters,keep_fargs=false,unsafe_comps,unsafe" | uglifyjs --mangle --output=../static/main.js
```

Now the ```static``` directory can be deployed as a static website.
