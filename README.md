# What The Students Think

A static website for displaying the results of the National Student Survey.

# Program structure

The data used for the website is held in two CSV files.  One contains the overall scores for each university and the other contains the by-subject breakdown for each university.

The front end is written in Elm, and contains all the data.  There is also a Haskell program that processes the raw data and generates the Elm data files.

# Building

First clone the repository and cd into it.

Software versions that the build is tested with:

+ [Elm](https://guide.elm-lang.org/install.html) 0.19.1
+ [Haskell Tool Stack](https://docs.haskellstack.org/en/stable/install_and_upgrade/) 2.1.3

The build has only been tested in Ubuntu Linux, version 19.10.

1. Build the Haske with ```stack build```. 
2. Generate Data.elm (which contains integer codes for universities and subjects) by running ```stack exec generateCodes```.
3. Build the front end with ```elm make elmSrc/Main.elm --output --optimize main.js```
4. Compress the Javascript file generated by Elm and put the result in the dataFiles directory with ```uglifyjs main.js --compress "pure_funcs=[F2,F3,F4,F5,F6,F7,F8,F9,A2,A3,A4,A5,A6,A7,A8,A9],pure_getters,keep_fargs=false,unsafe_comps,unsafe" | uglifyjs --mangle --output=dataFiles/main.js```. (Get uglifyjs [here](https://github.com/mishoo/UglifyJS2))

Now your ```dataFiles``` directory can be deployed as a static website.
